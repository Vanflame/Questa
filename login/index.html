<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questa - Login</title>
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="Sign in to Questa and start earning from gaming quests">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Questa">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" href="/assets/images/logo.png">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <link rel="manifest" href="/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/assets/css/styles.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body class="modern-auth-body">
    <!-- Background Pattern -->
    <div class="auth-background"></div>

    <!-- Navigation -->
    <nav class="modern-auth-nav">
        <div class="auth-nav-container">
            <div class="auth-nav-content">
                <div class="auth-nav-logo">
                    <img src="/assets/images/logo.png" alt="Questa Logo" class="auth-logo-img">
                    <div class="auth-brand-text">
                        <span class="auth-brand-name">Questa</span>
                        <span class="auth-brand-subtitle">Earn from Gaming</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Login Page -->
    <div class="modern-auth-container">
        <div class="modern-auth-card">
            <div class="auth-card-header">
                <div class="auth-card-logo">
                    <img src="/assets/images/logo.png" alt="Questa Logo" class="auth-card-logo-img">
                </div>
                <div class="auth-card-title-section">
                    <h1 class="auth-card-title">Welcome Back</h1>
                    <p class="auth-card-subtitle">Sign in to continue earning from gaming quests</p>
                </div>
            </div>

            <div class="auth-card-content">
                <!-- Google Login -->
                <button id="google-login" class="modern-google-btn">
                    <i class="fab fa-google"></i>
                    <span>Continue with Google</span>
                </button>

                <!-- Divider -->
                <div class="modern-auth-divider">
                    <span class="divider-text">or</span>
                </div>

                <!-- Email Form -->
                <form id="email-login-form" class="modern-auth-form">
                    <div class="modern-form-group">
                        <label for="email" class="modern-form-label">Email Address</label>
                        <div class="modern-input-container">
                            <i class="fas fa-envelope modern-input-icon"></i>
                            <input id="email" name="email" type="email" required class="modern-form-input"
                                placeholder="Enter your email">
                        </div>
                        <div class="modern-error-message" id="email-error"></div>
                    </div>

                    <div class="modern-form-group">
                        <label for="password" class="modern-form-label">Password</label>
                        <div class="modern-input-container">
                            <i class="fas fa-lock modern-input-icon"></i>
                            <input id="password" name="password" type="password" required class="modern-form-input"
                                placeholder="Enter your password">
                            <button type="button" class="modern-password-toggle" id="password-toggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="modern-error-message" id="password-error"></div>
                    </div>

                    <div class="modern-form-actions">
                        <button type="submit" class="modern-primary-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Sign In</span>
                        </button>
                        <button type="button" id="register-btn" class="modern-secondary-btn"
                            onclick="window.location.href='/register/'">
                            <i class="fas fa-user-plus"></i>
                            <span>Create Account</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner"
        class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <div class="flex items-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                <span class="text-gray-700">Loading...</span>
            </div>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <!-- App Scripts -->
    <script src="/assets/js/firebase-config.js"></script>
    <script src="/assets/js/auth.js"></script>
    <script src="/assets/js/firestore.js"></script>
    <script src="/assets/js/storage.js"></script>
    <script src="/assets/js/login-handler.js"></script>

    <script>
        // Service Worker Registration
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("/service-worker.js")
                    .then((registration) => {
                        console.log("Service Worker registered successfully:", registration.scope);
                    })
                    .catch((error) => {
                        console.log("Service Worker registration failed:", error);
                    });
            });
        }
    </script>
</body>

</html>